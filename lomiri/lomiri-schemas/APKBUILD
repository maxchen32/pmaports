# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Luca Weiss <luca@z3ntu.xyz>
pkgname=lomiri-schemas
pkgver=0_git20220218
pkgrel=0
_commit="60e0cdbf4bd3eeb998ef649f4d3e6b0ea1e62b03"
pkgdesc='GSettings / AccountsService schema files for Lomiri'
arch="noarch"
url="https://gitlab.com/ubports/development/core/lomiri-schemas"
license="LGPL-2.1"
makedepends="cmake cmake-extras glib-dev intltool"
source="https://gitlab.com/ubports/development/core/lomiri-schemas/-/archive/$_commit/lomiri-schemas-$_commit.tar.gz"
builddir="$srcdir/$pkgname-$_commit"
options="!check" # No tests

build() {
	cmake -B build \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_INSTALL_LOCALSTATEDIR=/var
	make -C build
}

package() {
	make -C build DESTDIR="$pkgdir" install
}

sha512sums="
e42b2915ff0ceb93ceaab8ef66c57e3401804f70db4ed88ae8082df37c312b02a074020a6a7ee3bfe46bbcc4e10b8f4eb6be64c2f34dce0e1930d8229f9d050a  lomiri-schemas-60e0cdbf4bd3eeb998ef649f4d3e6b0ea1e62b03.tar.gz
"
